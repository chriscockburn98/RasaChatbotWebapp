const QueryAction = require('../models/QueryAction')
const ObjectId = require('mongoose').Types.ObjectId;

function storeQueryAction(username, query, response_utter, deviceType, isRelevant) {
  return new Promise((resolve, reject) => {
    const date = new Date;

    QueryAction.create({
      username: username,
      query: query,
      response_utter: response_utter,
      date: date,
      deviceType: deviceType,
      isRelevant: isRelevant
    }, (err, response) => {
      if (err) throw reject(err);
      resolve(response._id)
    })
  })
}

function updateQueryAction(id, isRelevant) {
  QueryAction.findByIdAndUpdate(ObjectId(id), {isRelevant: isRelevant}, (err, result) => {
    if (err) throw err;
  })
}

module.exports = {
	storeQueryAction,
  updateQueryAction,
}